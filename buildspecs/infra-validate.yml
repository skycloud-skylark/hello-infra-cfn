version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.9
    commands:
      - python3 -m pip install --upgrade pip
      - python3 -m pip install cfn-lint

  pre_build:
    commands:
      - 'echo PWD=$(pwd)'
      - 'echo Listing repo contents'
      - 'ls -la'
      - 'echo Listing cfn contents'
      - 'ls -la cfn || true'
      - '[ -f cfn/hello-eks.yaml ] || { echo "ERROR missing cfn/hello-eks.yaml"; exit 2; }'

  build:
    commands:
      - 'cfn-lint -t ./cfn/hello-eks.yaml'

artifacts:
  files:
    - cfn/hello-eks.yaml
